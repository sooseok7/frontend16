{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _get2 = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _momentTimezone = _interopRequireDefault(require(\"moment-timezone\"));\n\nvar _rrule = require(\"rrule\");\n\nrequire(\"./index.css\");\n\nvar _event = _interopRequireDefault(require(\"./event\"));\n\nvar _multiEvent = _interopRequireDefault(require(\"./multiEvent\"));\n\nvar _helper = require(\"./utils/helper\");\n\nvar _googleCalendarAPI = require(\"./utils/googleCalendarAPI\");\n\nvar _react2 = require(\"@emotion/react\");\n\nvar _gud = _interopRequireDefault(require(\"gud\"));\n\nvar _languages = require(\"./languages\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() {\n  return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";\n}\n\nvar _ref = process.env.NODE_ENV === \"production\" ? {\n  name: \"1hrdiqt\",\n  styles: \"font-size:14px;text-decoration:none;color:inherit;&:hover{text-decoration:underline;}\"\n} : {\n  name: \"d0cexe-Calendar\",\n  styles: \"font-size:14px;text-decoration:none;color:inherit;&:hover{text-decoration:underline;};label:Calendar;\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n};\n\nvar _ref2 = process.env.NODE_ENV === \"production\" ? {\n  name: \"p20sj1\",\n  styles: \"vertical-align:top;margin-left:3px;margin-right:3px\"\n} : {\n  name: \"s71wyw-Calendar\",\n  styles: \"vertical-align:top;margin-left:3px;margin-right:3px;label:Calendar;\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n};\n\nvar _ref3 = process.env.NODE_ENV === \"production\" ? {\n  name: \"7l8byf\",\n  styles: \"font-size:14px;padding-left:5px;text-align:left\"\n} : {\n  name: \"155wnvz-Calendar\",\n  styles: \"font-size:14px;padding-left:5px;text-align:left;label:Calendar;\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n};\n\nvar _ref4 = process.env.NODE_ENV === \"production\" ? {\n  name: \"sgs7ru\",\n  styles: \"padding-right:6px\"\n} : {\n  name: \"csro95-Calendar\",\n  styles: \"padding-right:6px;label:Calendar;\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n};\n\nvar _ref5 = process.env.NODE_ENV === \"production\" ? {\n  name: \"sgs7ru\",\n  styles: \"padding-right:6px\"\n} : {\n  name: \"csro95-Calendar\",\n  styles: \"padding-right:6px;label:Calendar;\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n};\n\nvar Calendar = /*#__PURE__*/function (_React$Component) {\n  (0, _inherits2[\"default\"])(Calendar, _React$Component);\n\n  var _super = _createSuper(Calendar);\n\n  function Calendar(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Calendar);\n    _this = _super.call(this, props);\n    _this.state = {\n      monthNames: (0, _toConsumableArray2[\"default\"])(_languages.Languages.EN.MONTHS),\n      days: (0, _toConsumableArray2[\"default\"])(_languages.Languages.EN.DAYS),\n      today: (0, _momentTimezone[\"default\"])(),\n      current: (0, _momentTimezone[\"default\"])().startOf(\"month\").utc(true),\n      //current position on calendar (first day of month)\n      calendars: [],\n      events: [],\n      //all day or multi day events\n      singleEvents: [],\n      //single day events\n      userTimezone: _momentTimezone[\"default\"].tz.guess(),\n      showFooter: props.showFooter\n    };\n    _this.lastMonth = _this.lastMonth.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.nextMonth = _this.nextMonth.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Calendar, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n        var lang, res, _iterator, _step, calendar, _res, events;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (Boolean(this.props.language) && _languages.availableLanguages.includes(this.props.language.toUpperCase())) {\n                  // try to change langue\n                  try {\n                    lang = this.props.language.toUpperCase();\n                    this.setState({\n                      monthNames: (0, _toConsumableArray2[\"default\"])(_languages.Languages[lang].MONTHS),\n                      days: (0, _toConsumableArray2[\"default\"])(_languages.Languages[lang].DAYS)\n                    });\n                  } catch (err) {\n                    console.error(\"Error choosing a new language\", err);\n                  }\n                } //init and load google calendar api\n\n\n                _context.prev = 1;\n                _context.next = 4;\n                return (0, _googleCalendarAPI.loadCalendarAPI)(this.props.apiKey);\n\n              case 4:\n                res = _context.sent;\n                console.log(res);\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n                console.error(\"Error loading GAPI client for API\", _context.t0);\n\n              case 11:\n                //Get events from all calendars\n                _iterator = _createForOfIteratorHelper(this.props.calendars);\n                _context.prev = 12;\n\n                _iterator.s();\n\n              case 14:\n                if ((_step = _iterator.n()).done) {\n                  _context.next = 29;\n                  break;\n                }\n\n                calendar = _step.value;\n                _context.prev = 16;\n                _context.next = 19;\n                return (0, _googleCalendarAPI.getEventsList)(calendar.calendarId);\n\n              case 19:\n                _res = _context.sent; //process events\n\n                events = this.processEvents(_res.result.items, _res.result.summary, calendar.color); //set state with calculated values\n\n                this.setState({\n                  \"events\": [].concat((0, _toConsumableArray2[\"default\"])(this.state.events), (0, _toConsumableArray2[\"default\"])(events[0])),\n                  \"singleEvents\": [].concat((0, _toConsumableArray2[\"default\"])(this.state.singleEvents), (0, _toConsumableArray2[\"default\"])(events[1]))\n                });\n                _context.next = 27;\n                break;\n\n              case 24:\n                _context.prev = 24;\n                _context.t1 = _context[\"catch\"](16);\n                console.error(\"Error getting events\", _context.t1);\n\n              case 27:\n                _context.next = 14;\n                break;\n\n              case 29:\n                _context.next = 34;\n                break;\n\n              case 31:\n                _context.prev = 31;\n                _context.t2 = _context[\"catch\"](12);\n\n                _iterator.e(_context.t2);\n\n              case 34:\n                _context.prev = 34;\n\n                _iterator.f();\n\n                return _context.finish(34);\n\n              case 37:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 8], [12, 31, 34, 37], [16, 24]]);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }() //get easy to work with events and singleEvents from response\n\n  }, {\n    key: \"processEvents\",\n    value: function processEvents(items, calendarName, color) {\n      var singleEvents = [];\n      var events = [];\n      var changed = [];\n      var cancelled = [];\n      items.forEach(function (event) {\n        if (event.originalStartTime) {\n          //cancelled or changed events\n          if (event.status == \"cancelled\") {\n            //cancelled events\n            cancelled.push({\n              recurringEventId: event.recurringEventId,\n              originalStartTime: event.originalStartTime.dateTime ? (0, _momentTimezone[\"default\"])(event.originalStartTime.dateTime) : _momentTimezone[\"default\"].parseZone(event.originalStartTime.date)\n            });\n          } else if (event.status == \"confirmed\") {\n            //changed events\n            changed.push({\n              recurringEventId: event.recurringEventId,\n              name: event.summary,\n              description: event.description,\n              location: event.location,\n              originalStartTime: event.originalStartTime.dateTime ? (0, _momentTimezone[\"default\"])(event.originalStartTime.dateTime) : _momentTimezone[\"default\"].parseZone(event.originalStartTime.date),\n              newStartTime: event.start.dateTime ? (0, _momentTimezone[\"default\"])(event.start.dateTime) : _momentTimezone[\"default\"].parseZone(event.start.date),\n              newEndTime: event.end.dateTime ? (0, _momentTimezone[\"default\"])(event.end.dateTime) : _momentTimezone[\"default\"].parseZone(event.end.date)\n            });\n          } else {\n            console.log(\"Not categorized: \", event);\n          }\n        } else if (event.status == \"confirmed\") {\n          //normal events\n          var newEvent = {\n            id: event.id,\n            name: event.summary,\n            startTime: event.start.dateTime ? (0, _momentTimezone[\"default\"])(event.start.dateTime) : _momentTimezone[\"default\"].parseZone(event.start.date),\n            endTime: event.end.dateTime ? (0, _momentTimezone[\"default\"])(event.end.dateTime) : _momentTimezone[\"default\"].parseZone(event.end.date),\n            description: event.description,\n            location: event.location,\n            recurrence: event.recurrence,\n            changedEvents: [],\n            cancelledEvents: [],\n            calendarName: calendarName,\n            color: color\n          };\n\n          if ((0, _helper.isMultiEvent)(newEvent.startTime, newEvent.endTime)) {\n            events.push(newEvent);\n          } else {\n            singleEvents.push(newEvent);\n          }\n        } else {\n          console.log(\"Not categorized: \", event);\n        }\n      }); //add changed events and cancelled events to corresponding event object\n\n      events.forEach(function (event, idx, arr) {\n        if (event.recurrence) {\n          //push changed events\n          changed.filter(function (change) {\n            return change.recurringEventId == event.id;\n          }).forEach(function (change) {\n            arr[idx].changedEvents.push(change);\n          }); //push cancelled events\n\n          cancelled.filter(function (cancel) {\n            return cancel.recurringEventId == event.id;\n          }).forEach(function (cancel) {\n            arr[idx].cancelledEvents.push(cancel.originalStartTime);\n          });\n        }\n      });\n      singleEvents.forEach(function (event, idx, arr) {\n        if (event.recurrence) {\n          //push changed events\n          changed.filter(function (change) {\n            return change.recurringEventId == event.id;\n          }).forEach(function (change) {\n            arr[idx].changedEvents.push(change);\n          }); //push cancelled events\n\n          cancelled.filter(function (cancel) {\n            return cancel.recurringEventId == event.id;\n          }).forEach(function (cancel) {\n            arr[idx].cancelledEvents.push(cancel.originalStartTime);\n          });\n        }\n      });\n      return [events, singleEvents];\n    } //sets current month to previous month\n\n  }, {\n    key: \"lastMonth\",\n    value: function lastMonth() {\n      this.setState({\n        current: this.state.current.subtract(1, \"months\")\n      });\n    } //sets current month to following month\n\n  }, {\n    key: \"nextMonth\",\n    value: function nextMonth() {\n      this.setState({\n        current: this.state.current.add(1, \"months\")\n      });\n    }\n  }, {\n    key: \"clearEvents\",\n    value: function clearEvents() {\n      for (var i = 1; i <= this.state.current.daysInMonth(); i++) {\n        var node = document.getElementById(\"day-\" + i);\n\n        while (node.lastElementChild) {\n          node.removeChild(node.lastElementChild);\n        }\n      }\n    } //renders the day of week names\n\n  }, {\n    key: \"renderDays\",\n    value: function renderDays() {\n      var _this2 = this;\n\n      return this.state.days.map(function (x, i) {\n        return (0, _react2.jsx)(\"div\", {\n          className: \"day-name\",\n          key: \"day-of-week-\" + i,\n          css: [\"border-color:LightGray;\", (0, _get2[\"default\"])(_this2.props.styles, 'day', {}), process.env.NODE_ENV === \"production\" ? \"\" : \";label:Calendar;\"]\n        }, x);\n      });\n    } //renders the blocks for the days of each month\n\n  }, {\n    key: \"renderDates\",\n    value: function renderDates(eventsEachDay) {\n      var _this3 = this;\n\n      var days = (0, _toConsumableArray2[\"default\"])(Array(this.state.current.daysInMonth() + 1).keys()).slice(1); // create array from 1 to number of days in month\n\n      var dayOfWeek = this.state.current.day(); //get day of week of first day in the month\n\n      var padDays = ((-this.state.current.daysInMonth() - this.state.current.day()) % 7 + 7) % 7; //number of days to fill out the last row    \n\n      return [(0, _toConsumableArray2[\"default\"])(Array(dayOfWeek)).map(function (x, i) {\n        return (0, _react2.jsx)(\"div\", {\n          className: \"day\",\n          key: \"empty-day-\" + i,\n          css: (0, _get2[\"default\"])(_this3.props.styles, 'day', {})\n        });\n      }), days.map(function (x) {\n        if (x == _this3.state.today.date() && _this3.state.current.isSame(_this3.state.today, \"month\")) {\n          return (0, _react2.jsx)(\"div\", {\n            className: \"day\",\n            key: \"day-\" + x,\n            css: [(0, _get2[\"default\"])(_this3.props.styles, 'day', {}), (0, _get2[\"default\"])(_this3.props.styles, 'today', {}), process.env.NODE_ENV === \"production\" ? \"\" : \";label:Calendar;\"]\n          }, (0, _react2.jsx)(\"span\", {\n            css: _ref4\n          }, x), (0, _react2.jsx)(\"div\", {\n            className: \"innerDay\",\n            id: \"day-\" + x\n          }, eventsEachDay[x - 1]));\n        } else {\n          return (0, _react2.jsx)(\"div\", {\n            className: \"day\",\n            key: \"day-\" + x,\n            css: (0, _get2[\"default\"])(_this3.props.styles, 'day', {})\n          }, (0, _react2.jsx)(\"span\", {\n            css: _ref5\n          }, x), (0, _react2.jsx)(\"div\", {\n            className: \"innerDay\",\n            id: \"day-\" + x\n          }, eventsEachDay[x - 1]));\n        }\n      }), (0, _toConsumableArray2[\"default\"])(Array(padDays)).map(function (x, i) {\n        return (0, _react2.jsx)(\"div\", {\n          className: \"day\",\n          key: \"empty-day-2-\" + i,\n          css: (0, _get2[\"default\"])(_this3.props.styles, 'day', {})\n        });\n      })];\n    } //get array of arrays of length days in month containing the events in each day\n\n  }, {\n    key: \"getRenderEvents\",\n    value: function getRenderEvents(events, singleEvents) {\n      var _this4 = this;\n\n      var eventsEachDay = (0, _toConsumableArray2[\"default\"])(Array(this.state.current.daysInMonth())).map(function (e) {\n        return [];\n      }); //create array of empty arrays of length daysInMonth\n\n      events.forEach(function (event) {\n        if (event.recurrence) {\n          var duration = _momentTimezone[\"default\"].duration(event.endTime.diff(event.startTime));\n\n          var dates = Calendar.getDatesFromRRule(event.recurrence[0], event.startTime, (0, _momentTimezone[\"default\"])(_this4.state.current).subtract(duration), (0, _momentTimezone[\"default\"])(_this4.state.current).add(1, \"month\")); //render recurrences\n\n          dates.forEach(function (date) {\n            //don't render if it is cancelled\n            if (event.cancelledEvents.some(function (cancelledMoment) {\n              return cancelledMoment.isSame(date, \"day\");\n            })) {\n              return;\n            }\n\n            var props; //update information if event has changed\n\n            var changedEvent = event.changedEvents.find(function (changedEvent) {\n              return changedEvent.originalStartTime.isSame(date, \"day\");\n            });\n\n            if (changedEvent) {\n              props = {\n                name: changedEvent.name,\n                startTime: changedEvent.newStartTime,\n                endTime: changedEvent.newEndTime,\n                description: changedEvent.description,\n                location: changedEvent.location,\n                calendarName: event.calendarName,\n                color: event.color\n              };\n            } else {\n              var eventStart = _momentTimezone[\"default\"].utc(date); //since rrule works with utc times\n\n\n              var eventEnd = (0, _momentTimezone[\"default\"])(eventStart).add(duration);\n              props = {\n                name: event.name,\n                startTime: eventStart,\n                endTime: eventEnd,\n                description: event.description,\n                location: event.location,\n                calendarName: event.calendarName,\n                color: event.color\n              };\n            }\n\n            _this4.drawMultiEvent(eventsEachDay, props);\n          });\n        } else {\n          //render event\n          //check if event is in range\n          if ((event.startTime.month() != _this4.state.current.month() || event.startTime.year() != _this4.state.current.year()) && event.endTime.month() != _this4.state.current.month() || event.endTime.year() != _this4.state.current.year()) {\n            return;\n          }\n\n          _this4.drawMultiEvent(eventsEachDay, event);\n        }\n      });\n      var eventProps = {\n        tooltipStyles: (0, _get2[\"default\"])(this.props.styles, 'tooltip', {}),\n        //gets this.props.styles.tooltip if exists, else empty object\n        eventStyles: (0, _get2[\"default\"])(this.props.styles, 'event', {}),\n        eventCircleStyles: (0, _get2[\"default\"])(this.props.styles, 'eventCircle', {}),\n        eventTextStyles: (0, _get2[\"default\"])(this.props.styles, 'eventText', {})\n      };\n      singleEvents.forEach(function (event) {\n        if (event.recurrence) {\n          var duration = _momentTimezone[\"default\"].duration(event.endTime.diff(event.startTime)); //get recurrences using RRule\n\n\n          var dates = Calendar.getDatesFromRRule(event.recurrence[0], event.startTime, (0, _momentTimezone[\"default\"])(_this4.state.current), (0, _momentTimezone[\"default\"])(_this4.state.current).add(1, \"month\")); //render recurrences\n\n          dates.forEach(function (date) {\n            //check if it is in cancelled\n            if (event.cancelledEvents.some(function (cancelledMoment) {\n              return cancelledMoment.isSame(date, \"day\");\n            })) {\n              return;\n            } //if event has changed\n\n\n            var changedEvent = event.changedEvents.find(function (changedEvent) {\n              return changedEvent.originalStartTime.isSame(date, \"day\");\n            });\n\n            if (changedEvent) {\n              var props = {\n                name: changedEvent.name,\n                startTime: changedEvent.newStartTime,\n                endTime: changedEvent.newEndTime,\n                description: changedEvent.description,\n                location: changedEvent.location,\n                calendarName: event.calendarName,\n                color: event.color\n              };\n            } else {\n              var eventStart = _momentTimezone[\"default\"].utc(date); //avoid bad timezone conversions\n\n\n              var eventEnd = (0, _momentTimezone[\"default\"])(eventStart).add(duration);\n              var props = {\n                name: event.name,\n                startTime: eventStart,\n                endTime: eventEnd,\n                description: event.description,\n                location: event.location,\n                calendarName: event.calendarName,\n                color: event.color\n              };\n            }\n\n            _this4.renderSingleEvent(eventsEachDay, (0, _momentTimezone[\"default\"])(props.startTime).date(), _objectSpread(_objectSpread({}, props), eventProps));\n          });\n        } else {\n          //check if event is in current month\n          if (event.startTime.month() != _this4.state.current.month() || event.startTime.year() != _this4.state.current.year()) {\n            return;\n          }\n\n          _this4.renderSingleEvent(eventsEachDay, (0, _momentTimezone[\"default\"])(event.startTime).date(), _objectSpread(_objectSpread({}, event), eventProps));\n        }\n      });\n      return eventsEachDay;\n    } //TODO: refactor\n    //decides how to render events\n\n  }, {\n    key: \"drawMultiEvent\",\n    value: function drawMultiEvent(eventsEachDay, props) {\n      var startDrawDate;\n      var blockLength = 1;\n      var curDate;\n      var endDate;\n      var arrowLeft = false;\n      var arrowRight = false;\n\n      if (props.endTime.isSame((0, _momentTimezone[\"default\"])(props.endTime).startOf(\"day\"), \"second\")) {\n        endDate = (0, _momentTimezone[\"default\"])(props.endTime).utc(true).subtract(1, \"day\");\n      } else {\n        endDate = (0, _momentTimezone[\"default\"])(props.endTime).utc(true);\n      }\n\n      if ((0, _momentTimezone[\"default\"])(props.startTime).utc(true).isBefore(this.state.current)) {\n        if (this.props.showArrow) {\n          arrowLeft = true;\n        }\n\n        startDrawDate = 1;\n        curDate = (0, _momentTimezone[\"default\"])(this.state.current).utc(true);\n      } else {\n        startDrawDate = props.startTime.date();\n        curDate = (0, _momentTimezone[\"default\"])(props.startTime).utc(true);\n      }\n\n      while (curDate.isSameOrBefore(endDate, \"day\")) {\n        if (curDate.date() == this.state.current.daysInMonth() && !endDate.isSame(this.state.current, 'month')) {\n          if (this.props.showArrow) {\n            arrowRight = true;\n          } //draw then quit\n\n\n          this.renderMultiEventBlock(eventsEachDay, startDrawDate, blockLength, props, arrowLeft, arrowRight);\n          break;\n        }\n\n        if (curDate.date() == this.state.current.daysInMonth() || curDate.isSame(endDate, \"day\")) {\n          //draw then quit\n          this.renderMultiEventBlock(eventsEachDay, startDrawDate, blockLength, props, arrowLeft, arrowRight);\n          break;\n        }\n\n        if (curDate.day() == 6) {\n          //draw then reset\n          this.renderMultiEventBlock(eventsEachDay, startDrawDate, blockLength, props, arrowLeft, arrowRight);\n          startDrawDate = (0, _momentTimezone[\"default\"])(curDate).add(1, \"day\").date();\n          blockLength = 0;\n          arrowLeft = false;\n          arrowRight = false;\n        }\n\n        blockLength++;\n        curDate.add(1, \"day\");\n      }\n    } //TODO: refactor this too?\n    //handles rendering and proper stacking of individual blocks \n\n  }, {\n    key: \"renderMultiEventBlock\",\n    value: function renderMultiEventBlock(eventsEachDay, startDate, length, props, arrowLeft, arrowRight) {\n      var multiEventProps = {\n        tooltipStyles: (0, _get2[\"default\"])(this.props.styles, 'tooltip', {}),\n        //gets this.props.styles.tooltip if exists, else empty object\n        multiEventStyles: (0, _get2[\"default\"])(this.props.styles, 'multiEvent', {})\n      };\n      var maxBlocks = 0;\n      var closedSlots = []; //keep track of rows that the event can't be inserted into\n\n      for (var i = 0; i < length; i++) {\n        var dayEvents = eventsEachDay[startDate - 1 + i];\n\n        if (dayEvents.length > maxBlocks) {\n          maxBlocks = dayEvents.length;\n        } //address rows that are not the last element in closedSlots\n\n\n        for (var j = 0; j < maxBlocks; j++) {\n          if (j > dayEvents.length) {\n            break;\n          } else if (closedSlots.includes(j)) {\n            continue;\n          }\n\n          if (dayEvents[j].props.className.includes(\"isEvent\")) {\n            closedSlots.push(j);\n          }\n        }\n      }\n\n      var chosenRow;\n\n      for (var _i = 0; _i <= maxBlocks; _i++) {\n        if (!closedSlots.includes(_i)) {\n          chosenRow = _i;\n          break;\n        }\n      } //fill in placeholders\n\n\n      for (var _i2 = 0; _i2 < length; _i2++) {\n        //placeholders\n        while (eventsEachDay[startDate - 1 + _i2].length <= chosenRow) {\n          eventsEachDay[startDate - 1 + _i2].push((0, _react2.jsx)(\"div\", {\n            className: \"event below placeholder\",\n            key: \"placeholder-\".concat((0, _gud[\"default\"])())\n          }));\n        } //rest of event that is under the main banner\n\n\n        eventsEachDay[startDate - 1 + _i2][chosenRow] = (0, _react2.jsx)(\"div\", {\n          className: \"isEvent event below\",\n          key: \"filler-\".concat((0, _gud[\"default\"])())\n        });\n      } //render event\n\n\n      eventsEachDay[startDate - 1][chosenRow] = (0, _react2.jsx)(\"div\", {\n        className: \"isEvent\",\n        key: \"multi-event-\".concat(chosenRow)\n      }, (0, _react2.jsx)(_multiEvent[\"default\"], (0, _extends2[\"default\"])({}, props, multiEventProps, {\n        length: length,\n        arrowLeft: arrowLeft,\n        arrowRight: arrowRight,\n        key: \"multi-event-\".concat((0, _gud[\"default\"])())\n      })));\n    } //attempts to render in a placeholder then at the end\n\n  }, {\n    key: \"renderSingleEvent\",\n    value: function renderSingleEvent(eventsEachDay, date, props) {\n      var foundEmpty = false;\n      var nodes = eventsEachDay[date - 1];\n\n      for (var i = 0; i < nodes.length; i++) {\n        if (nodes[i].props.className.includes(\"event\") && !nodes[i].props.className.includes(\"isEvent\")) {\n          //target only placeholders\n          nodes[i] = (0, _react2.jsx)(\"div\", {\n            className: \"isEvent\",\n            key: \"single-event-\".concat((0, _gud[\"default\"])())\n          }, (0, _react2.jsx)(_event[\"default\"], (0, _extends2[\"default\"])({}, props, {\n            key: \"single-event-\".concat((0, _gud[\"default\"])())\n          })));\n          foundEmpty = true;\n          break;\n        }\n      }\n\n      if (!foundEmpty) {\n        eventsEachDay[date - 1].push((0, _react2.jsx)(\"div\", {\n          className: \"isEvent\",\n          key: \"single-event-\".concat((0, _gud[\"default\"])())\n        }, (0, _react2.jsx)(_event[\"default\"], (0, _extends2[\"default\"])({}, props, {\n          key: \"single-event-\".concat((0, _gud[\"default\"])())\n        }))));\n      }\n    } //get dates based on rrule string between dates\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var eventsEachDay = this.getRenderEvents(this.state.events, this.state.singleEvents);\n      return (0, _react2.jsx)(\"div\", {\n        className: \"calendar\",\n        css: [\"font-size:18px;border:1px solid;min-width:300px;position:relative;border-color:LightGray;color:#51565d;\", (0, _get2[\"default\"])(this.props.styles, 'calendar', {}), process.env.NODE_ENV === \"production\" ? \"\" : \";label:Calendar;\"]\n      }, (0, _react2.jsx)(\"div\", {\n        className: \"calendar-header\"\n      }, (0, _react2.jsx)(\"div\", {\n        className: \"calendar-navigate unselectable\",\n        onClick: this.lastMonth\n      }, \"\\u276E\"), (0, _react2.jsx)(\"div\", null, (0, _react2.jsx)(\"h2\", {\n        className: \"calendar-title\"\n      }, this.state.monthNames[this.state.current.month()] + \" \" + this.state.current.year())), (0, _react2.jsx)(\"div\", {\n        className: \"calendar-navigate unselectable\",\n        onClick: this.nextMonth\n      }, \"\\u276F\")), (0, _react2.jsx)(\"div\", {\n        className: \"calendar-body\"\n      }, this.renderDays(), this.renderDates(eventsEachDay)), this.state.showFooter && (0, _react2.jsx)(\"div\", {\n        className: \"calendar-footer\"\n      }, (0, _react2.jsx)(\"div\", {\n        css: _ref3\n      }, \"All times shown your timezone (\", (0, _momentTimezone[\"default\"])().tz(this.state.userTimezone).format(\"z\"), \")\"), (0, _react2.jsx)(\"div\", {\n        css: _ref2\n      }, (0, _react2.jsx)(\"a\", {\n        href: \"https://calendar.google.com/calendar/r?cid=\" + this.props.calendarId,\n        target: \"_blank\",\n        css: _ref\n      }, \"+ Add Calendar\"))));\n    }\n  }], [{\n    key: \"getDatesFromRRule\",\n    value: function getDatesFromRRule(str, eventStart, betweenStart, betweenEnd) {\n      //get recurrences using RRule\n      var rstr = \"DTSTART:\".concat((0, _momentTimezone[\"default\"])(eventStart).utc(true).format('YYYYMMDDTHHmmss'), \"Z\\n\").concat(str);\n      var rruleSet = (0, _rrule.rrulestr)(rstr, {\n        forceset: true\n      }); //get dates\n\n      var begin = (0, _momentTimezone[\"default\"])(betweenStart).utc(true).toDate();\n      var end = (0, _momentTimezone[\"default\"])(betweenEnd).utc(true).toDate();\n      var dates = rruleSet.between(begin, end);\n      return dates;\n    }\n  }]);\n  return Calendar;\n}(_react[\"default\"].Component);\n\nexports[\"default\"] = Calendar;\nCalendar.propTypes = {\n  calendars: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n    calendarId: _propTypes[\"default\"].string.isRequired,\n    color: _propTypes[\"default\"].string\n  })).isRequired,\n  apiKey: _propTypes[\"default\"].string.isRequired,\n  showFooter: _propTypes[\"default\"].bool.isRequired,\n  showArrow: _propTypes[\"default\"].bool,\n  styles: _propTypes[\"default\"].object,\n  language: _propTypes[\"default\"].string\n};\nCalendar.defaultProps = {\n  showArrow: true,\n  showFooter: true\n};","map":{"version":3,"sources":["C:/frontend-1/node_modules/@ericz1803/react-google-calendar/index.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_extends2","_defineProperty2","_regenerator","_asyncToGenerator2","_toConsumableArray2","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_get2","_react","_propTypes","_momentTimezone","_rrule","_event","_multiEvent","_helper","_googleCalendarAPI","_react2","_gud","_languages","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","F","s","n","done","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","Reflect","construct","sham","Proxy","Date","_EMOTION_STRINGIFIED_CSS_ERROR__","_ref","process","env","NODE_ENV","styles","_ref2","_ref3","_ref4","_ref5","Calendar","_React$Component","_super","props","_this","state","monthNames","Languages","EN","MONTHS","days","DAYS","today","current","startOf","utc","calendars","events","singleEvents","userTimezone","tz","guess","showFooter","lastMonth","bind","nextMonth","_componentDidMount","mark","_callee","lang","res","_iterator","_step","calendar","_res","wrap","_callee$","_context","prev","Boolean","language","availableLanguages","includes","toUpperCase","setState","console","error","loadCalendarAPI","apiKey","sent","log","t0","getEventsList","calendarId","processEvents","items","summary","color","concat","t1","t2","finish","stop","componentDidMount","calendarName","changed","cancelled","event","originalStartTime","status","recurringEventId","dateTime","parseZone","date","description","location","newStartTime","start","newEndTime","end","newEvent","id","startTime","endTime","recurrence","changedEvents","cancelledEvents","isMultiEvent","idx","change","cancel","subtract","add","clearEvents","daysInMonth","node","document","getElementById","lastElementChild","removeChild","renderDays","_this2","map","x","jsx","className","css","renderDates","eventsEachDay","_this3","dayOfWeek","day","padDays","isSame","getRenderEvents","_this4","duration","diff","dates","getDatesFromRRule","some","cancelledMoment","changedEvent","find","eventStart","eventEnd","drawMultiEvent","month","year","eventProps","tooltipStyles","eventStyles","eventCircleStyles","eventTextStyles","renderSingleEvent","startDrawDate","blockLength","curDate","endDate","arrowLeft","arrowRight","isBefore","showArrow","isSameOrBefore","renderMultiEventBlock","startDate","multiEventProps","multiEventStyles","maxBlocks","closedSlots","dayEvents","j","chosenRow","_i","_i2","foundEmpty","nodes","render","onClick","format","href","str","betweenStart","betweenEnd","rstr","rruleSet","rrulestr","forceset","begin","toDate","between","Component","propTypes","arrayOf","shape","string","isRequired","bool","defaultProps"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports[\"default\"] = void 0;\r\n\r\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\r\n\r\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\r\n\r\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\r\n\r\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\r\n\r\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\r\n\r\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\r\n\r\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\r\n\r\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\r\n\r\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\r\n\r\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\r\n\r\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\r\n\r\nvar _get2 = _interopRequireDefault(require(\"lodash/get\"));\r\n\r\nvar _react = _interopRequireDefault(require(\"react\"));\r\n\r\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\r\n\r\nvar _momentTimezone = _interopRequireDefault(require(\"moment-timezone\"));\r\n\r\nvar _rrule = require(\"rrule\");\r\n\r\nrequire(\"./index.css\");\r\n\r\nvar _event = _interopRequireDefault(require(\"./event\"));\r\n\r\nvar _multiEvent = _interopRequireDefault(require(\"./multiEvent\"));\r\n\r\nvar _helper = require(\"./utils/helper\");\r\n\r\nvar _googleCalendarAPI = require(\"./utils/googleCalendarAPI\");\r\n\r\nvar _react2 = require(\"@emotion/react\");\r\n\r\nvar _gud = _interopRequireDefault(require(\"gud\"));\r\n\r\nvar _languages = require(\"./languages\");\r\n\r\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\r\n\r\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\r\n\r\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\r\n\r\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\r\n\r\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\r\n\r\nvar _ref = process.env.NODE_ENV === \"production\" ? {\r\n  name: \"1hrdiqt\",\r\n  styles: \"font-size:14px;text-decoration:none;color:inherit;&:hover{text-decoration:underline;}\"\r\n} : {\r\n  name: \"d0cexe-Calendar\",\r\n  styles: \"font-size:14px;text-decoration:none;color:inherit;&:hover{text-decoration:underline;};label:Calendar;\",\r\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\r\n};\r\n\r\nvar _ref2 = process.env.NODE_ENV === \"production\" ? {\r\n  name: \"p20sj1\",\r\n  styles: \"vertical-align:top;margin-left:3px;margin-right:3px\"\r\n} : {\r\n  name: \"s71wyw-Calendar\",\r\n  styles: \"vertical-align:top;margin-left:3px;margin-right:3px;label:Calendar;\",\r\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\r\n};\r\n\r\nvar _ref3 = process.env.NODE_ENV === \"production\" ? {\r\n  name: \"7l8byf\",\r\n  styles: \"font-size:14px;padding-left:5px;text-align:left\"\r\n} : {\r\n  name: \"155wnvz-Calendar\",\r\n  styles: \"font-size:14px;padding-left:5px;text-align:left;label:Calendar;\",\r\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\r\n};\r\n\r\nvar _ref4 = process.env.NODE_ENV === \"production\" ? {\r\n  name: \"sgs7ru\",\r\n  styles: \"padding-right:6px\"\r\n} : {\r\n  name: \"csro95-Calendar\",\r\n  styles: \"padding-right:6px;label:Calendar;\",\r\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\r\n};\r\n\r\nvar _ref5 = process.env.NODE_ENV === \"production\" ? {\r\n  name: \"sgs7ru\",\r\n  styles: \"padding-right:6px\"\r\n} : {\r\n  name: \"csro95-Calendar\",\r\n  styles: \"padding-right:6px;label:Calendar;\",\r\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\r\n};\r\n\r\nvar Calendar = /*#__PURE__*/function (_React$Component) {\r\n  (0, _inherits2[\"default\"])(Calendar, _React$Component);\r\n\r\n  var _super = _createSuper(Calendar);\r\n\r\n  function Calendar(props) {\r\n    var _this;\r\n\r\n    (0, _classCallCheck2[\"default\"])(this, Calendar);\r\n    _this = _super.call(this, props);\r\n    _this.state = {\r\n      monthNames: (0, _toConsumableArray2[\"default\"])(_languages.Languages.EN.MONTHS),\r\n      days: (0, _toConsumableArray2[\"default\"])(_languages.Languages.EN.DAYS),\r\n      today: (0, _momentTimezone[\"default\"])(),\r\n      current: (0, _momentTimezone[\"default\"])().startOf(\"month\").utc(true),\r\n      //current position on calendar (first day of month)\r\n      calendars: [],\r\n      events: [],\r\n      //all day or multi day events\r\n      singleEvents: [],\r\n      //single day events\r\n      userTimezone: _momentTimezone[\"default\"].tz.guess(),\r\n      showFooter: props.showFooter\r\n    };\r\n    _this.lastMonth = _this.lastMonth.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.nextMonth = _this.nextMonth.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    return _this;\r\n  }\r\n\r\n  (0, _createClass2[\"default\"])(Calendar, [{\r\n    key: \"componentDidMount\",\r\n    value: function () {\r\n      var _componentDidMount = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\r\n        var lang, res, _iterator, _step, calendar, _res, events;\r\n\r\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\r\n          while (1) {\r\n            switch (_context.prev = _context.next) {\r\n              case 0:\r\n                if (Boolean(this.props.language) && _languages.availableLanguages.includes(this.props.language.toUpperCase())) {\r\n                  // try to change langue\r\n                  try {\r\n                    lang = this.props.language.toUpperCase();\r\n                    this.setState({\r\n                      monthNames: (0, _toConsumableArray2[\"default\"])(_languages.Languages[lang].MONTHS),\r\n                      days: (0, _toConsumableArray2[\"default\"])(_languages.Languages[lang].DAYS)\r\n                    });\r\n                  } catch (err) {\r\n                    console.error(\"Error choosing a new language\", err);\r\n                  }\r\n                } //init and load google calendar api\r\n\r\n\r\n                _context.prev = 1;\r\n                _context.next = 4;\r\n                return (0, _googleCalendarAPI.loadCalendarAPI)(this.props.apiKey);\r\n\r\n              case 4:\r\n                res = _context.sent;\r\n                console.log(res);\r\n                _context.next = 11;\r\n                break;\r\n\r\n              case 8:\r\n                _context.prev = 8;\r\n                _context.t0 = _context[\"catch\"](1);\r\n                console.error(\"Error loading GAPI client for API\", _context.t0);\r\n\r\n              case 11:\r\n                //Get events from all calendars\r\n                _iterator = _createForOfIteratorHelper(this.props.calendars);\r\n                _context.prev = 12;\r\n\r\n                _iterator.s();\r\n\r\n              case 14:\r\n                if ((_step = _iterator.n()).done) {\r\n                  _context.next = 29;\r\n                  break;\r\n                }\r\n\r\n                calendar = _step.value;\r\n                _context.prev = 16;\r\n                _context.next = 19;\r\n                return (0, _googleCalendarAPI.getEventsList)(calendar.calendarId);\r\n\r\n              case 19:\r\n                _res = _context.sent;\r\n                //process events\r\n                events = this.processEvents(_res.result.items, _res.result.summary, calendar.color); //set state with calculated values\r\n\r\n                this.setState({\r\n                  \"events\": [].concat((0, _toConsumableArray2[\"default\"])(this.state.events), (0, _toConsumableArray2[\"default\"])(events[0])),\r\n                  \"singleEvents\": [].concat((0, _toConsumableArray2[\"default\"])(this.state.singleEvents), (0, _toConsumableArray2[\"default\"])(events[1]))\r\n                });\r\n                _context.next = 27;\r\n                break;\r\n\r\n              case 24:\r\n                _context.prev = 24;\r\n                _context.t1 = _context[\"catch\"](16);\r\n                console.error(\"Error getting events\", _context.t1);\r\n\r\n              case 27:\r\n                _context.next = 14;\r\n                break;\r\n\r\n              case 29:\r\n                _context.next = 34;\r\n                break;\r\n\r\n              case 31:\r\n                _context.prev = 31;\r\n                _context.t2 = _context[\"catch\"](12);\r\n\r\n                _iterator.e(_context.t2);\r\n\r\n              case 34:\r\n                _context.prev = 34;\r\n\r\n                _iterator.f();\r\n\r\n                return _context.finish(34);\r\n\r\n              case 37:\r\n              case \"end\":\r\n                return _context.stop();\r\n            }\r\n          }\r\n        }, _callee, this, [[1, 8], [12, 31, 34, 37], [16, 24]]);\r\n      }));\r\n\r\n      function componentDidMount() {\r\n        return _componentDidMount.apply(this, arguments);\r\n      }\r\n\r\n      return componentDidMount;\r\n    }() //get easy to work with events and singleEvents from response\r\n\r\n  }, {\r\n    key: \"processEvents\",\r\n    value: function processEvents(items, calendarName, color) {\r\n      var singleEvents = [];\r\n      var events = [];\r\n      var changed = [];\r\n      var cancelled = [];\r\n      items.forEach(function (event) {\r\n        if (event.originalStartTime) {\r\n          //cancelled or changed events\r\n          if (event.status == \"cancelled\") {\r\n            //cancelled events\r\n            cancelled.push({\r\n              recurringEventId: event.recurringEventId,\r\n              originalStartTime: event.originalStartTime.dateTime ? (0, _momentTimezone[\"default\"])(event.originalStartTime.dateTime) : _momentTimezone[\"default\"].parseZone(event.originalStartTime.date)\r\n            });\r\n          } else if (event.status == \"confirmed\") {\r\n            //changed events\r\n            changed.push({\r\n              recurringEventId: event.recurringEventId,\r\n              name: event.summary,\r\n              description: event.description,\r\n              location: event.location,\r\n              originalStartTime: event.originalStartTime.dateTime ? (0, _momentTimezone[\"default\"])(event.originalStartTime.dateTime) : _momentTimezone[\"default\"].parseZone(event.originalStartTime.date),\r\n              newStartTime: event.start.dateTime ? (0, _momentTimezone[\"default\"])(event.start.dateTime) : _momentTimezone[\"default\"].parseZone(event.start.date),\r\n              newEndTime: event.end.dateTime ? (0, _momentTimezone[\"default\"])(event.end.dateTime) : _momentTimezone[\"default\"].parseZone(event.end.date)\r\n            });\r\n          } else {\r\n            console.log(\"Not categorized: \", event);\r\n          }\r\n        } else if (event.status == \"confirmed\") {\r\n          //normal events\r\n          var newEvent = {\r\n            id: event.id,\r\n            name: event.summary,\r\n            startTime: event.start.dateTime ? (0, _momentTimezone[\"default\"])(event.start.dateTime) : _momentTimezone[\"default\"].parseZone(event.start.date),\r\n            endTime: event.end.dateTime ? (0, _momentTimezone[\"default\"])(event.end.dateTime) : _momentTimezone[\"default\"].parseZone(event.end.date),\r\n            description: event.description,\r\n            location: event.location,\r\n            recurrence: event.recurrence,\r\n            changedEvents: [],\r\n            cancelledEvents: [],\r\n            calendarName: calendarName,\r\n            color: color\r\n          };\r\n\r\n          if ((0, _helper.isMultiEvent)(newEvent.startTime, newEvent.endTime)) {\r\n            events.push(newEvent);\r\n          } else {\r\n            singleEvents.push(newEvent);\r\n          }\r\n        } else {\r\n          console.log(\"Not categorized: \", event);\r\n        }\r\n      }); //add changed events and cancelled events to corresponding event object\r\n\r\n      events.forEach(function (event, idx, arr) {\r\n        if (event.recurrence) {\r\n          //push changed events\r\n          changed.filter(function (change) {\r\n            return change.recurringEventId == event.id;\r\n          }).forEach(function (change) {\r\n            arr[idx].changedEvents.push(change);\r\n          }); //push cancelled events\r\n\r\n          cancelled.filter(function (cancel) {\r\n            return cancel.recurringEventId == event.id;\r\n          }).forEach(function (cancel) {\r\n            arr[idx].cancelledEvents.push(cancel.originalStartTime);\r\n          });\r\n        }\r\n      });\r\n      singleEvents.forEach(function (event, idx, arr) {\r\n        if (event.recurrence) {\r\n          //push changed events\r\n          changed.filter(function (change) {\r\n            return change.recurringEventId == event.id;\r\n          }).forEach(function (change) {\r\n            arr[idx].changedEvents.push(change);\r\n          }); //push cancelled events\r\n\r\n          cancelled.filter(function (cancel) {\r\n            return cancel.recurringEventId == event.id;\r\n          }).forEach(function (cancel) {\r\n            arr[idx].cancelledEvents.push(cancel.originalStartTime);\r\n          });\r\n        }\r\n      });\r\n      return [events, singleEvents];\r\n    } //sets current month to previous month\r\n\r\n  }, {\r\n    key: \"lastMonth\",\r\n    value: function lastMonth() {\r\n      this.setState({\r\n        current: this.state.current.subtract(1, \"months\")\r\n      });\r\n    } //sets current month to following month\r\n\r\n  }, {\r\n    key: \"nextMonth\",\r\n    value: function nextMonth() {\r\n      this.setState({\r\n        current: this.state.current.add(1, \"months\")\r\n      });\r\n    }\r\n  }, {\r\n    key: \"clearEvents\",\r\n    value: function clearEvents() {\r\n      for (var i = 1; i <= this.state.current.daysInMonth(); i++) {\r\n        var node = document.getElementById(\"day-\" + i);\r\n\r\n        while (node.lastElementChild) {\r\n          node.removeChild(node.lastElementChild);\r\n        }\r\n      }\r\n    } //renders the day of week names\r\n\r\n  }, {\r\n    key: \"renderDays\",\r\n    value: function renderDays() {\r\n      var _this2 = this;\r\n\r\n      return this.state.days.map(function (x, i) {\r\n        return (0, _react2.jsx)(\"div\", {\r\n          className: \"day-name\",\r\n          key: \"day-of-week-\" + i,\r\n          css: [\"border-color:LightGray;\", (0, _get2[\"default\"])(_this2.props.styles, 'day', {}), process.env.NODE_ENV === \"production\" ? \"\" : \";label:Calendar;\"]\r\n        }, x);\r\n      });\r\n    } //renders the blocks for the days of each month\r\n\r\n  }, {\r\n    key: \"renderDates\",\r\n    value: function renderDates(eventsEachDay) {\r\n      var _this3 = this;\r\n\r\n      var days = (0, _toConsumableArray2[\"default\"])(Array(this.state.current.daysInMonth() + 1).keys()).slice(1); // create array from 1 to number of days in month\r\n\r\n      var dayOfWeek = this.state.current.day(); //get day of week of first day in the month\r\n\r\n      var padDays = ((-this.state.current.daysInMonth() - this.state.current.day()) % 7 + 7) % 7; //number of days to fill out the last row    \r\n\r\n      return [(0, _toConsumableArray2[\"default\"])(Array(dayOfWeek)).map(function (x, i) {\r\n        return (0, _react2.jsx)(\"div\", {\r\n          className: \"day\",\r\n          key: \"empty-day-\" + i,\r\n          css: (0, _get2[\"default\"])(_this3.props.styles, 'day', {})\r\n        });\r\n      }), days.map(function (x) {\r\n        if (x == _this3.state.today.date() && _this3.state.current.isSame(_this3.state.today, \"month\")) {\r\n          return (0, _react2.jsx)(\"div\", {\r\n            className: \"day\",\r\n            key: \"day-\" + x,\r\n            css: [(0, _get2[\"default\"])(_this3.props.styles, 'day', {}), (0, _get2[\"default\"])(_this3.props.styles, 'today', {}), process.env.NODE_ENV === \"production\" ? \"\" : \";label:Calendar;\"]\r\n          }, (0, _react2.jsx)(\"span\", {\r\n            css: _ref4\r\n          }, x), (0, _react2.jsx)(\"div\", {\r\n            className: \"innerDay\",\r\n            id: \"day-\" + x\r\n          }, eventsEachDay[x - 1]));\r\n        } else {\r\n          return (0, _react2.jsx)(\"div\", {\r\n            className: \"day\",\r\n            key: \"day-\" + x,\r\n            css: (0, _get2[\"default\"])(_this3.props.styles, 'day', {})\r\n          }, (0, _react2.jsx)(\"span\", {\r\n            css: _ref5\r\n          }, x), (0, _react2.jsx)(\"div\", {\r\n            className: \"innerDay\",\r\n            id: \"day-\" + x\r\n          }, eventsEachDay[x - 1]));\r\n        }\r\n      }), (0, _toConsumableArray2[\"default\"])(Array(padDays)).map(function (x, i) {\r\n        return (0, _react2.jsx)(\"div\", {\r\n          className: \"day\",\r\n          key: \"empty-day-2-\" + i,\r\n          css: (0, _get2[\"default\"])(_this3.props.styles, 'day', {})\r\n        });\r\n      })];\r\n    } //get array of arrays of length days in month containing the events in each day\r\n\r\n  }, {\r\n    key: \"getRenderEvents\",\r\n    value: function getRenderEvents(events, singleEvents) {\r\n      var _this4 = this;\r\n\r\n      var eventsEachDay = (0, _toConsumableArray2[\"default\"])(Array(this.state.current.daysInMonth())).map(function (e) {\r\n        return [];\r\n      }); //create array of empty arrays of length daysInMonth\r\n\r\n      events.forEach(function (event) {\r\n        if (event.recurrence) {\r\n          var duration = _momentTimezone[\"default\"].duration(event.endTime.diff(event.startTime));\r\n\r\n          var dates = Calendar.getDatesFromRRule(event.recurrence[0], event.startTime, (0, _momentTimezone[\"default\"])(_this4.state.current).subtract(duration), (0, _momentTimezone[\"default\"])(_this4.state.current).add(1, \"month\")); //render recurrences\r\n\r\n          dates.forEach(function (date) {\r\n            //don't render if it is cancelled\r\n            if (event.cancelledEvents.some(function (cancelledMoment) {\r\n              return cancelledMoment.isSame(date, \"day\");\r\n            })) {\r\n              return;\r\n            }\r\n\r\n            var props; //update information if event has changed\r\n\r\n            var changedEvent = event.changedEvents.find(function (changedEvent) {\r\n              return changedEvent.originalStartTime.isSame(date, \"day\");\r\n            });\r\n\r\n            if (changedEvent) {\r\n              props = {\r\n                name: changedEvent.name,\r\n                startTime: changedEvent.newStartTime,\r\n                endTime: changedEvent.newEndTime,\r\n                description: changedEvent.description,\r\n                location: changedEvent.location,\r\n                calendarName: event.calendarName,\r\n                color: event.color\r\n              };\r\n            } else {\r\n              var eventStart = _momentTimezone[\"default\"].utc(date); //since rrule works with utc times\r\n\r\n\r\n              var eventEnd = (0, _momentTimezone[\"default\"])(eventStart).add(duration);\r\n              props = {\r\n                name: event.name,\r\n                startTime: eventStart,\r\n                endTime: eventEnd,\r\n                description: event.description,\r\n                location: event.location,\r\n                calendarName: event.calendarName,\r\n                color: event.color\r\n              };\r\n            }\r\n\r\n            _this4.drawMultiEvent(eventsEachDay, props);\r\n          });\r\n        } else {\r\n          //render event\r\n          //check if event is in range\r\n          if ((event.startTime.month() != _this4.state.current.month() || event.startTime.year() != _this4.state.current.year()) && event.endTime.month() != _this4.state.current.month() || event.endTime.year() != _this4.state.current.year()) {\r\n            return;\r\n          }\r\n\r\n          _this4.drawMultiEvent(eventsEachDay, event);\r\n        }\r\n      });\r\n      var eventProps = {\r\n        tooltipStyles: (0, _get2[\"default\"])(this.props.styles, 'tooltip', {}),\r\n        //gets this.props.styles.tooltip if exists, else empty object\r\n        eventStyles: (0, _get2[\"default\"])(this.props.styles, 'event', {}),\r\n        eventCircleStyles: (0, _get2[\"default\"])(this.props.styles, 'eventCircle', {}),\r\n        eventTextStyles: (0, _get2[\"default\"])(this.props.styles, 'eventText', {})\r\n      };\r\n      singleEvents.forEach(function (event) {\r\n        if (event.recurrence) {\r\n          var duration = _momentTimezone[\"default\"].duration(event.endTime.diff(event.startTime)); //get recurrences using RRule\r\n\r\n\r\n          var dates = Calendar.getDatesFromRRule(event.recurrence[0], event.startTime, (0, _momentTimezone[\"default\"])(_this4.state.current), (0, _momentTimezone[\"default\"])(_this4.state.current).add(1, \"month\")); //render recurrences\r\n\r\n          dates.forEach(function (date) {\r\n            //check if it is in cancelled\r\n            if (event.cancelledEvents.some(function (cancelledMoment) {\r\n              return cancelledMoment.isSame(date, \"day\");\r\n            })) {\r\n              return;\r\n            } //if event has changed\r\n\r\n\r\n            var changedEvent = event.changedEvents.find(function (changedEvent) {\r\n              return changedEvent.originalStartTime.isSame(date, \"day\");\r\n            });\r\n\r\n            if (changedEvent) {\r\n              var props = {\r\n                name: changedEvent.name,\r\n                startTime: changedEvent.newStartTime,\r\n                endTime: changedEvent.newEndTime,\r\n                description: changedEvent.description,\r\n                location: changedEvent.location,\r\n                calendarName: event.calendarName,\r\n                color: event.color\r\n              };\r\n            } else {\r\n              var eventStart = _momentTimezone[\"default\"].utc(date); //avoid bad timezone conversions\r\n\r\n\r\n              var eventEnd = (0, _momentTimezone[\"default\"])(eventStart).add(duration);\r\n              var props = {\r\n                name: event.name,\r\n                startTime: eventStart,\r\n                endTime: eventEnd,\r\n                description: event.description,\r\n                location: event.location,\r\n                calendarName: event.calendarName,\r\n                color: event.color\r\n              };\r\n            }\r\n\r\n            _this4.renderSingleEvent(eventsEachDay, (0, _momentTimezone[\"default\"])(props.startTime).date(), _objectSpread(_objectSpread({}, props), eventProps));\r\n          });\r\n        } else {\r\n          //check if event is in current month\r\n          if (event.startTime.month() != _this4.state.current.month() || event.startTime.year() != _this4.state.current.year()) {\r\n            return;\r\n          }\r\n\r\n          _this4.renderSingleEvent(eventsEachDay, (0, _momentTimezone[\"default\"])(event.startTime).date(), _objectSpread(_objectSpread({}, event), eventProps));\r\n        }\r\n      });\r\n      return eventsEachDay;\r\n    } //TODO: refactor\r\n    //decides how to render events\r\n\r\n  }, {\r\n    key: \"drawMultiEvent\",\r\n    value: function drawMultiEvent(eventsEachDay, props) {\r\n      var startDrawDate;\r\n      var blockLength = 1;\r\n      var curDate;\r\n      var endDate;\r\n      var arrowLeft = false;\r\n      var arrowRight = false;\r\n\r\n      if (props.endTime.isSame((0, _momentTimezone[\"default\"])(props.endTime).startOf(\"day\"), \"second\")) {\r\n        endDate = (0, _momentTimezone[\"default\"])(props.endTime).utc(true).subtract(1, \"day\");\r\n      } else {\r\n        endDate = (0, _momentTimezone[\"default\"])(props.endTime).utc(true);\r\n      }\r\n\r\n      if ((0, _momentTimezone[\"default\"])(props.startTime).utc(true).isBefore(this.state.current)) {\r\n        if (this.props.showArrow) {\r\n          arrowLeft = true;\r\n        }\r\n\r\n        startDrawDate = 1;\r\n        curDate = (0, _momentTimezone[\"default\"])(this.state.current).utc(true);\r\n      } else {\r\n        startDrawDate = props.startTime.date();\r\n        curDate = (0, _momentTimezone[\"default\"])(props.startTime).utc(true);\r\n      }\r\n\r\n      while (curDate.isSameOrBefore(endDate, \"day\")) {\r\n        if (curDate.date() == this.state.current.daysInMonth() && !endDate.isSame(this.state.current, 'month')) {\r\n          if (this.props.showArrow) {\r\n            arrowRight = true;\r\n          } //draw then quit\r\n\r\n\r\n          this.renderMultiEventBlock(eventsEachDay, startDrawDate, blockLength, props, arrowLeft, arrowRight);\r\n          break;\r\n        }\r\n\r\n        if (curDate.date() == this.state.current.daysInMonth() || curDate.isSame(endDate, \"day\")) {\r\n          //draw then quit\r\n          this.renderMultiEventBlock(eventsEachDay, startDrawDate, blockLength, props, arrowLeft, arrowRight);\r\n          break;\r\n        }\r\n\r\n        if (curDate.day() == 6) {\r\n          //draw then reset\r\n          this.renderMultiEventBlock(eventsEachDay, startDrawDate, blockLength, props, arrowLeft, arrowRight);\r\n          startDrawDate = (0, _momentTimezone[\"default\"])(curDate).add(1, \"day\").date();\r\n          blockLength = 0;\r\n          arrowLeft = false;\r\n          arrowRight = false;\r\n        }\r\n\r\n        blockLength++;\r\n        curDate.add(1, \"day\");\r\n      }\r\n    } //TODO: refactor this too?\r\n    //handles rendering and proper stacking of individual blocks \r\n\r\n  }, {\r\n    key: \"renderMultiEventBlock\",\r\n    value: function renderMultiEventBlock(eventsEachDay, startDate, length, props, arrowLeft, arrowRight) {\r\n      var multiEventProps = {\r\n        tooltipStyles: (0, _get2[\"default\"])(this.props.styles, 'tooltip', {}),\r\n        //gets this.props.styles.tooltip if exists, else empty object\r\n        multiEventStyles: (0, _get2[\"default\"])(this.props.styles, 'multiEvent', {})\r\n      };\r\n      var maxBlocks = 0;\r\n      var closedSlots = []; //keep track of rows that the event can't be inserted into\r\n\r\n      for (var i = 0; i < length; i++) {\r\n        var dayEvents = eventsEachDay[startDate - 1 + i];\r\n\r\n        if (dayEvents.length > maxBlocks) {\r\n          maxBlocks = dayEvents.length;\r\n        } //address rows that are not the last element in closedSlots\r\n\r\n\r\n        for (var j = 0; j < maxBlocks; j++) {\r\n          if (j > dayEvents.length) {\r\n            break;\r\n          } else if (closedSlots.includes(j)) {\r\n            continue;\r\n          }\r\n\r\n          if (dayEvents[j].props.className.includes(\"isEvent\")) {\r\n            closedSlots.push(j);\r\n          }\r\n        }\r\n      }\r\n\r\n      var chosenRow;\r\n\r\n      for (var _i = 0; _i <= maxBlocks; _i++) {\r\n        if (!closedSlots.includes(_i)) {\r\n          chosenRow = _i;\r\n          break;\r\n        }\r\n      } //fill in placeholders\r\n\r\n\r\n      for (var _i2 = 0; _i2 < length; _i2++) {\r\n        //placeholders\r\n        while (eventsEachDay[startDate - 1 + _i2].length <= chosenRow) {\r\n          eventsEachDay[startDate - 1 + _i2].push((0, _react2.jsx)(\"div\", {\r\n            className: \"event below placeholder\",\r\n            key: \"placeholder-\".concat((0, _gud[\"default\"])())\r\n          }));\r\n        } //rest of event that is under the main banner\r\n\r\n\r\n        eventsEachDay[startDate - 1 + _i2][chosenRow] = (0, _react2.jsx)(\"div\", {\r\n          className: \"isEvent event below\",\r\n          key: \"filler-\".concat((0, _gud[\"default\"])())\r\n        });\r\n      } //render event\r\n\r\n\r\n      eventsEachDay[startDate - 1][chosenRow] = (0, _react2.jsx)(\"div\", {\r\n        className: \"isEvent\",\r\n        key: \"multi-event-\".concat(chosenRow)\r\n      }, (0, _react2.jsx)(_multiEvent[\"default\"], (0, _extends2[\"default\"])({}, props, multiEventProps, {\r\n        length: length,\r\n        arrowLeft: arrowLeft,\r\n        arrowRight: arrowRight,\r\n        key: \"multi-event-\".concat((0, _gud[\"default\"])())\r\n      })));\r\n    } //attempts to render in a placeholder then at the end\r\n\r\n  }, {\r\n    key: \"renderSingleEvent\",\r\n    value: function renderSingleEvent(eventsEachDay, date, props) {\r\n      var foundEmpty = false;\r\n      var nodes = eventsEachDay[date - 1];\r\n\r\n      for (var i = 0; i < nodes.length; i++) {\r\n        if (nodes[i].props.className.includes(\"event\") && !nodes[i].props.className.includes(\"isEvent\")) {\r\n          //target only placeholders\r\n          nodes[i] = (0, _react2.jsx)(\"div\", {\r\n            className: \"isEvent\",\r\n            key: \"single-event-\".concat((0, _gud[\"default\"])())\r\n          }, (0, _react2.jsx)(_event[\"default\"], (0, _extends2[\"default\"])({}, props, {\r\n            key: \"single-event-\".concat((0, _gud[\"default\"])())\r\n          })));\r\n          foundEmpty = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!foundEmpty) {\r\n        eventsEachDay[date - 1].push((0, _react2.jsx)(\"div\", {\r\n          className: \"isEvent\",\r\n          key: \"single-event-\".concat((0, _gud[\"default\"])())\r\n        }, (0, _react2.jsx)(_event[\"default\"], (0, _extends2[\"default\"])({}, props, {\r\n          key: \"single-event-\".concat((0, _gud[\"default\"])())\r\n        }))));\r\n      }\r\n    } //get dates based on rrule string between dates\r\n\r\n  }, {\r\n    key: \"render\",\r\n    value: function render() {\r\n      var eventsEachDay = this.getRenderEvents(this.state.events, this.state.singleEvents);\r\n      return (0, _react2.jsx)(\"div\", {\r\n        className: \"calendar\",\r\n        css: [\"font-size:18px;border:1px solid;min-width:300px;position:relative;border-color:LightGray;color:#51565d;\", (0, _get2[\"default\"])(this.props.styles, 'calendar', {}), process.env.NODE_ENV === \"production\" ? \"\" : \";label:Calendar;\"]\r\n      }, (0, _react2.jsx)(\"div\", {\r\n        className: \"calendar-header\"\r\n      }, (0, _react2.jsx)(\"div\", {\r\n        className: \"calendar-navigate unselectable\",\r\n        onClick: this.lastMonth\r\n      }, \"\\u276E\"), (0, _react2.jsx)(\"div\", null, (0, _react2.jsx)(\"h2\", {\r\n        className: \"calendar-title\"\r\n      }, this.state.monthNames[this.state.current.month()] + \" \" + this.state.current.year())), (0, _react2.jsx)(\"div\", {\r\n        className: \"calendar-navigate unselectable\",\r\n        onClick: this.nextMonth\r\n      }, \"\\u276F\")), (0, _react2.jsx)(\"div\", {\r\n        className: \"calendar-body\"\r\n      }, this.renderDays(), this.renderDates(eventsEachDay)), this.state.showFooter && (0, _react2.jsx)(\"div\", {\r\n        className: \"calendar-footer\"\r\n      }, (0, _react2.jsx)(\"div\", {\r\n        css: _ref3\r\n      }, \"All times shown your timezone (\", (0, _momentTimezone[\"default\"])().tz(this.state.userTimezone).format(\"z\"), \")\"), (0, _react2.jsx)(\"div\", {\r\n        css: _ref2\r\n      }, (0, _react2.jsx)(\"a\", {\r\n        href: \"https://calendar.google.com/calendar/r?cid=\" + this.props.calendarId,\r\n        target: \"_blank\",\r\n        css: _ref\r\n      }, \"+ Add Calendar\"))));\r\n    }\r\n  }], [{\r\n    key: \"getDatesFromRRule\",\r\n    value: function getDatesFromRRule(str, eventStart, betweenStart, betweenEnd) {\r\n      //get recurrences using RRule\r\n      var rstr = \"DTSTART:\".concat((0, _momentTimezone[\"default\"])(eventStart).utc(true).format('YYYYMMDDTHHmmss'), \"Z\\n\").concat(str);\r\n      var rruleSet = (0, _rrule.rrulestr)(rstr, {\r\n        forceset: true\r\n      }); //get dates\r\n\r\n      var begin = (0, _momentTimezone[\"default\"])(betweenStart).utc(true).toDate();\r\n      var end = (0, _momentTimezone[\"default\"])(betweenEnd).utc(true).toDate();\r\n      var dates = rruleSet.between(begin, end);\r\n      return dates;\r\n    }\r\n  }]);\r\n  return Calendar;\r\n}(_react[\"default\"].Component);\r\n\r\nexports[\"default\"] = Calendar;\r\nCalendar.propTypes = {\r\n  calendars: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\r\n    calendarId: _propTypes[\"default\"].string.isRequired,\r\n    color: _propTypes[\"default\"].string\r\n  })).isRequired,\r\n  apiKey: _propTypes[\"default\"].string.isRequired,\r\n  showFooter: _propTypes[\"default\"].bool.isRequired,\r\n  showArrow: _propTypes[\"default\"].bool,\r\n  styles: _propTypes[\"default\"].object,\r\n  language: _propTypes[\"default\"].string\r\n};\r\nCalendar.defaultProps = {\r\n  showArrow: true,\r\n  showFooter: true\r\n};"]},"metadata":{},"sourceType":"script"}